{% extends "base.html" %}

{% block content %}
<header>
    <h2>ç«‹æ›¿ã®ç·¨é›†</h2>
    <p>ã‚°ãƒ«ãƒ¼ãƒ—: {{ expense.group.name }}</p>
</header>

<section class="card">
    <h4>ğŸ“ ç·¨é›†å†…å®¹</h4>
    <form action="/expenses/{{ expense.id }}/edit" method="post">
        
        <label for="description">å†…å®¹</label>
        <input type="text" name="description" value="{{ expense.description }}" required>
        
        <label for="amount">é‡‘é¡ (å††)</label>
        <input type="number" name="amount" value="{{ expense.amount }}" required>

        <label for="payer_id">èª°ãŒæ‰•ã£ãŸï¼Ÿ</label>
        <select name="payer_id" required>
            {% for member in expense.group.members %}
                <option value="{{ member.id }}" {% if member.id == expense.payer_id %}selected{% endif %}>
                    {{ member.name }}
                </option>
            {% endfor %}
        </select>

        <label>èª°ã®åˆ†ï¼Ÿ (è¤‡æ•°é¸æŠå¯)</label>
        <div class="grid">
            {% for member in expense.group.members %}
            <label>
                <input type="checkbox" 
                       name="target_ids" 
                       value="{{ member.id }}" 
                       {% if member.id in current_target_ids %}checked{% endif %}>
                {{ member.name }}
            </label>
            {% endfor %}
        </div>

        <button type="submit" style="margin-top: 1rem;">å¤‰æ›´ã‚’ä¿å­˜ã™ã‚‹</button>
    </form>
</section>

<a href="/groups/{{ expense.group_id }}" role="button" class="secondary outline">
    â† ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ã¦æˆ»ã‚‹
</a>
{% endblock %}